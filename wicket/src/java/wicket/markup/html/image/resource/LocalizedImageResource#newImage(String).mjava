	/**
	 * Generates an image resource based on the attribute values on tag
	 * 
	 * @param value
	 *            The value to parse
	 */
	private void newImage(final String value)
	{
		// Parse value
		final ImageValueParser valueParser = new ImageValueParser(value);

		// Does value match parser?
		if (valueParser.matches())
		{
			final String imageReferenceName = valueParser.getImageReferenceName();
			final String specification = Strings.replaceHtmlEscapeNumber(valueParser.getSpecification());
			final String factoryName = valueParser.getFactoryName();
			final Application application = component.getApplication();
			
			// Do we have a reference?
			if (!Strings.isEmpty(imageReferenceName))
			{
				// Is resource already available via the application?
				if (application.getSharedResources().get(Application.class, imageReferenceName, locale, style) == null)
				{
					// Resource not available yet, so create it with factory and
					// share via Application
					final Resource imageResource = getImageResourceFactory(application, factoryName)
							.newResource(specification, locale, style);
					application.getSharedResources().add(Application.class, imageReferenceName, locale, style,
							imageResource);
				}

				// Create resource reference
				this.resourceReference = new ResourceReference(Application.class,
						imageReferenceName);
				resourceReference.setLocale(locale);
				resourceReference.setStyle(style);
			}
			else
			{
				this.resource = (ImageResource)getImageResourceFactory(application, factoryName)
						.newResource(specification, locale, style);
			}
		}
		else
		{
			throw new WicketRuntimeException(
					"Could not generate image for value attribute '"
							+ value
							+ "'.  Was expecting a value attribute of the form \"[resourceFactoryName]:[resourceReferenceName]?:[factorySpecification]\".");
		}
	}

